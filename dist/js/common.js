var view={containerForCards:document.getElementsByClassName("containerForCards")[0],pointsPerGame:document.getElementsByClassName("pointsForGames__text")[0].getElementsByTagName("span")[0],losePointsPerGame:document.getElementsByClassName("pointsForGames__text")[1].getElementsByTagName("span")[0],winPointsPerGame:document.getElementsByClassName("pointsForGames__text")[2].getElementsByTagName("span")[0],elapsedTimePerGame:document.getElementsByClassName("pointsForGames__text")[3].getElementsByTagName("span")[0],pointsForGames6LosePointsPerGame:document.getElementsByClassName("pointsForGames_6")[0].getElementsByTagName("span")[0],pointsForGames6WinPointsPerGame:document.getElementsByClassName("pointsForGames_6")[0].getElementsByTagName("span")[1],pointsForGames6ElapsedTimePerGame:document.getElementsByClassName("pointsForGames_6")[0].getElementsByTagName("span")[2],pointsForGames8LosePointsPerGame:document.getElementsByClassName("pointsForGames_8")[0].getElementsByTagName("span")[0],pointsForGames8WinPointsPerGame:document.getElementsByClassName("pointsForGames_8")[0].getElementsByTagName("span")[1],pointsForGames8ElapsedTimePerGame:document.getElementsByClassName("pointsForGames_8")[0].getElementsByTagName("span")[2],pointsForGames10LosePointsPerGame:document.getElementsByClassName("pointsForGames_10")[0].getElementsByTagName("span")[0],pointsForGames10WinPointsPerGame:document.getElementsByClassName("pointsForGames_10")[0].getElementsByTagName("span")[1],pointsForGames10ElapsedTimePerGame:document.getElementsByClassName("pointsForGames_10")[0].getElementsByTagName("span")[2],pointsForGames12LosePointsPerGame:document.getElementsByClassName("pointsForGames_12")[0].getElementsByTagName("span")[0],pointsForGames12WinPointsPerGame:document.getElementsByClassName("pointsForGames_12")[0].getElementsByTagName("span")[1],pointsForGames12ElapsedTimePerGame:document.getElementsByClassName("pointsForGames_12")[0].getElementsByTagName("span")[2],cardAddClassSelected:function(e){e.classList.add("containerForCards__cards_selected")},cardRemoveClassSelected:function(e){e.classList.remove("containerForCards__cards_selected")},showWinMessage:function(){var e=document.createElement("div");e.classList.add("containerForCards__winMessage"),e.innerHTML='<p class="containerForCards__pWinMessage">Вы успешно открыли все карточки!</p>',this.containerForCards.appendChild(e)},deleteWinMessageIfPresent:function(){var e=this.containerForCards.getElementsByClassName("containerForCards__winMessage");e.length>0&&e[0].parentNode.removeChild(e[0])},addElemToCardContainer:function(e){this.containerForCards.appendChild(e)},clearCardGameContainer:function(){view.containerForCards.innerHTML=""},disableContainerForCards:function(){view.containerForCards.classList.add("containerForCards_disabled")},enableContainerForCards:function(){view.containerForCards.classList.remove("containerForCards_disabled")},disableCard:function(e){e.classList.add("containerForCards__cards_disabled")},updateVictoryPoints:function(e){view.pointsPerGame.innerHTML=e},updateLosePoints:function(e){view.losePointsPerGame.innerHTML=e},updateElapsedTimePerGame:function(e){view.elapsedTimePerGame.innerHTML=e},outputTheResultPerGame:function(e){view.winPointsPerGame.innerHTML=e},zeroesThePointsInTheTable:function(){view.pointsPerGame.innerHTML=0,view.losePointsPerGame.innerHTML=0,view.winPointsPerGame.innerHTML=0,view.elapsedTimePerGame.innerHTML=0},setsTheStyleOfThePauseButton:function(){controller.containerWithInformationsBtnPauseAndRemove.classList.add("containerWithInformations__btn_pause"),controller.containerWithInformationsBtnPauseAndRemove.classList.remove("containerWithInformations__btn_resume"),controller.containerWithInformationsBtnPauseAndRemove.innerHTML="пауза"},setsTheStyleOfTheResumeButton:function(){controller.containerWithInformationsBtnPauseAndRemove.classList.add("containerWithInformations__btn_resume"),controller.containerWithInformationsBtnPauseAndRemove.classList.remove("containerWithInformations__btn_pause"),controller.containerWithInformationsBtnPauseAndRemove.innerHTML="возобновить"},setGameStyle:function(e){var n=document.getElementsByTagName("body")[0];n.classList.contains("style2")&&n.classList.remove("style2"),n.classList.contains("style3")&&n.classList.remove("style3"),1!=e&&(2==e&&n.classList.add("style2"),3==e&&n.classList.add("style3"))},loadLocalStarageInfoToATable:function(){void 0!=localStorage.pointsForGames6WinPointsPerGame&&(view.pointsForGames6LosePointsPerGame.innerHTML=localStorage.pointsForGames6LosePointsPerGame,view.pointsForGames6WinPointsPerGame.innerHTML=localStorage.pointsForGames6WinPointsPerGame,view.pointsForGames6ElapsedTimePerGame.innerHTML=localStorage.pointsForGames6ElapsedTimePerGame),void 0!=localStorage.pointsForGames8WinPointsPerGame&&(view.pointsForGames8LosePointsPerGame.innerHTML=localStorage.pointsForGames8LosePointsPerGame,view.pointsForGames8WinPointsPerGame.innerHTML=localStorage.pointsForGames8WinPointsPerGame,view.pointsForGames8ElapsedTimePerGame.innerHTML=localStorage.pointsForGames8ElapsedTimePerGame),void 0!=localStorage.pointsForGames10WinPointsPerGame&&(view.pointsForGames10LosePointsPerGame.innerHTML=localStorage.pointsForGames10LosePointsPerGame,view.pointsForGames10WinPointsPerGame.innerHTML=localStorage.pointsForGames10WinPointsPerGame,view.pointsForGames10ElapsedTimePerGame.innerHTML=localStorage.pointsForGames10ElapsedTimePerGame),void 0!=localStorage.pointsForGames12WinPointsPerGame&&(view.pointsForGames12LosePointsPerGame.innerHTML=localStorage.pointsForGames12LosePointsPerGame,view.pointsForGames12WinPointsPerGame.innerHTML=localStorage.pointsForGames12WinPointsPerGame,view.pointsForGames12ElapsedTimePerGame.innerHTML=localStorage.pointsForGames12ElapsedTimePerGame)},transferTheResultToATable:function(){6==+controller.select.value&&view.pointsForGames6WinPointsPerGame.innerHTML<view.winPointsPerGame.innerHTML&&(view.pointsForGames6LosePointsPerGame.innerHTML=view.losePointsPerGame.innerHTML,view.pointsForGames6WinPointsPerGame.innerHTML=view.winPointsPerGame.innerHTML,view.pointsForGames6ElapsedTimePerGame.innerHTML=view.elapsedTimePerGame.innerHTML,localStorage.pointsForGames6LosePointsPerGame=view.losePointsPerGame.innerHTML,localStorage.pointsForGames6WinPointsPerGame=view.winPointsPerGame.innerHTML,localStorage.pointsForGames6ElapsedTimePerGame=view.elapsedTimePerGame.innerHTML),8==+controller.select.value&&view.pointsForGames8WinPointsPerGame.innerHTML<view.winPointsPerGame.innerHTML&&(pointsForGames8LosePointsPerGame.innerHTML=view.losePointsPerGame.innerHTML,pointsForGames8WinPointsPerGame.innerHTML=view.winPointsPerGame.innerHTML,pointsForGames8ElapsedTimePerGame.innerHTML=view.elapsedTimePerGame.innerHTML,localStorage.pointsForGames8LosePointsPerGame=view.losePointsPerGame.innerHTML,localStorage.pointsForGames8WinPointsPerGame=view.winPointsPerGame.innerHTML,localStorage.pointsForGames8ElapsedTimePerGame=view.elapsedTimePerGame.innerHTML),10==+controller.select.value&&view.pointsForGames10WinPointsPerGame.innerHTML<view.winPointsPerGame.innerHTML&&(view.pointsForGames10LosePointsPerGame.innerHTML=view.losePointsPerGame.innerHTML,view.pointsForGames10WinPointsPerGame.innerHTML=view.winPointsPerGame.innerHTML,view.pointsForGames10ElapsedTimePerGame.innerHTML=view.elapsedTimePerGame.innerHTML,localStorage.pointsForGames10LosePointsPerGame=view.losePointsPerGame.innerHTML,localStorage.pointsForGames10WinPointsPerGame=view.winPointsPerGame.innerHTML,localStorage.pointsForGames10ElapsedTimePerGame=view.elapsedTimePerGame.innerHTML),12==+controller.select.value&&view.pointsForGames12WinPointsPerGame.innerHTML<view.winPointsPerGame.innerHTML&&(view.pointsForGames12LosePointsPerGame.innerHTML=view.losePointsPerGame.innerHTML,view.pointsForGames12WinPointsPerGame.innerHTML=view.winPointsPerGame.innerHTML,view.pointsForGames12ElapsedTimePerGame.innerHTML=view.elapsedTimePerGame.innerHTML,localStorage.pointsForGames12LosePointsPerGame=view.losePointsPerGame.innerHTML,localStorage.pointsForGames12WinPointsPerGame=view.winPointsPerGame.innerHTML,localStorage.pointsForGames12ElapsedTimePerGame=view.elapsedTimePerGame.innerHTML)}},model={maxNumber:"",timerCount:1,timer:"",viewingPermission:!0,createCardElem:function(e,n,a,t){var o,s,i=document.createElement("div"),r=document.createElement("div");return i.className="containerForCards__cards containerForCards__cards_inGame containerForCards__cards_number"+e,i.setAttribute("data-elem-number",n),r.classList.add("containerForCards__frontOfCard"),o=0==a?"0%":9*a+"%",s=0==t?"0%":9*t+"%",r.style.cssText="background-position:"+o+" "+s+";",i.appendChild(r),i},createRandomDivNumberArray:function(e){model.maxNumber=e*e,halfMaxNumber=model.maxNumber/2;for(var n=[],a=[],t=1;t<=model.maxNumber;t++)n[t-1]=t;for(var o=1;o<=model.maxNumber;o++){var s=Math.floor(Math.random()*n.length),i=n[s];i>halfMaxNumber&&(i-=halfMaxNumber),a[o-1]=i,n.splice(s,1)}return a},countResultPerGame:function(){var e;return 6==+controller.select.value&&(e=10),8==+controller.select.value&&(e=20),10==+controller.select.value&&(e=40),12==+controller.select.value&&(e=80),view.pointsPerGame.innerHTML*e-view.losePointsPerGame.innerHTML-Math.floor(view.elapsedTimePerGame.innerHTML/10)},add1WinPoints:function(){return+view.pointsPerGame.innerHTML+1},add1LosePoints:function(){return+view.losePointsPerGame.innerHTML+1},getNumberDisabledCards:function(){return document.getElementsByClassName("containerForCards__cards_disabled").length},ifGameOverStopTimer:function(){+model.maxNumber==+model.getNumberDisabledCards()&&clearInterval(model.timer)}},controller={select:document.getElementsByClassName("containerWithInformations__cardGameSize")[0],selectStyle:document.getElementsByClassName("containerWithInformations__cardGameStyle")[0],containerWithInformationsBtnPauseAndRemove:document.getElementsByClassName("containerWithInformations__btn")[0],containerWithInformationsBtnRestart:document.getElementsByClassName("containerWithInformations__btn")[1],appendDiv:function(e,n){var a,t;6==controller.select.value&&(a=n%6,t=n<=6?0:n>6&&n<=12?1:2),8==controller.select.value&&(a=n%8,n<=8?t=0:n>8&&n<=16?t=1:n>16&&n<=24?t=2:n>24&&n<=32&&(t=3)),10==controller.select.value&&(a=n%10,n<=10?t=0:n>10&&n<=20?t=1:n>20&&n<=30?t=2:n>30&&n<=40?t=3:n>40&&n<=50&&(t=4)),12==controller.select.value&&(a=n%12,n<=12?t=0:n>12&&n<=24?t=1:n>24&&n<=36?t=2:n>36&&n<=48?t=3:n>48&&n<=60?t=4:n>60&&n<=72?t=5:n>72&&n<=84&&(t=6));var o=model.createCardElem(e,n,a,t);view.addElemToCardContainer(o)},buildCardGame:function(e){view.deleteWinMessageIfPresent(),view.clearCardGameContainer();for(var n=model.createRandomDivNumberArray(e),a=0;a<n.length;a++)controller.appendDiv(e,n[a]);controller.showAllImg(model.maxNumber)},showAllImg:function(e){view.disableContainerForCards();for(var n=document.getElementsByClassName("containerForCards__cards"),a=1;a<=model.maxNumber;a++)view.cardAddClassSelected(n[a-1]);setTimeout(function(){for(var e=1;e<=model.maxNumber;e++)view.cardRemoveClassSelected(n[e-1]);view.enableContainerForCards()},3e3)},buildCardGameWhenClick:function(e){controller.buildCardGame(e),view.containerForCards.classList.contains("startTimer")||view.containerForCards.classList.add("startTimer"),clearInterval(model.timer),model.timerCount=1,view.zeroesThePointsInTheTable(),controller.containerWithInformationsBtnPauseAndRemove.classList.contains("containerWithInformations__btn_resume")&&view.setsTheStyleOfThePauseButton()},ifSelectedCards2RemoveClassSelected:function(e){model.viewingPermission=!1,setTimeout(function(){for(var n=1;n>=0;n--)view.cardRemoveClassSelected(e[n]);model.viewingPermission=!0,+model.maxNumber==+model.getNumberDisabledCards()&&(view.outputTheResultPerGame(model.countResultPerGame()),view.transferTheResultToATable(),view.showWinMessage())},700)},ifIdenticalSelectedCards:function(){var e=document.getElementsByClassName("containerForCards__cards_selected");if(2==e.length)if(e[0].getAttribute("data-elem-number")==e[1].getAttribute("data-elem-number")){for(var n=1;n>=0;n--)view.disableCard(e[n]);view.updateVictoryPoints(model.add1WinPoints()),controller.ifSelectedCards2RemoveClassSelected(e)}else controller.ifSelectedCards2RemoveClassSelected(e),view.updateLosePoints(model.add1LosePoints())},startTimer:function(){view.containerForCards.classList.contains("startTimer")&&(view.containerForCards.classList.remove("startTimer"),model.timer=setInterval(function(){view.updateElapsedTimePerGame(model.timerCount++)},1e3))}};window.onload=function(){runGame={init:function(){this.main(),this.event()},main:function(){view.setGameStyle(controller.selectStyle.value),controller.buildCardGame(controller.select.value),view.loadLocalStarageInfoToATable(),view.containerForCards.classList.add("startTimer")},event:function(){controller.select.addEventListener("change",function(){controller.buildCardGameWhenClick(+controller.select.value)}),controller.containerWithInformationsBtnRestart.addEventListener("click",function(){controller.buildCardGameWhenClick(+controller.select.value)}),controller.selectStyle.addEventListener("change",function(){view.setGameStyle(+controller.selectStyle.value)}),view.containerForCards.addEventListener("click",controller.startTimer),view.containerForCards.addEventListener("click",model.ifGameOverStopTimer),view.containerForCards.addEventListener("click",function(e){var n=e.target;model.viewingPermission&&(n.classList.contains("containerForCards__cards")&&n.classList.contains("containerForCards__cards_inGame")&&view.cardAddClassSelected(n),controller.ifIdenticalSelectedCards())}),controller.containerWithInformationsBtnPauseAndRemove.addEventListener("click",function(){view.containerForCards.classList.contains("startTimer")||(controller.containerWithInformationsBtnPauseAndRemove.classList.contains("containerWithInformations__btn_pause")?(view.setsTheStyleOfTheResumeButton(),clearInterval(model.timer),view.disableContainerForCards()):controller.containerWithInformationsBtnPauseAndRemove.classList.contains("containerWithInformations__btn_resume")&&(view.setsTheStyleOfThePauseButton(),model.timer=setInterval(function(){view.updateElapsedTimePerGame(model.timerCount++)},1e3),view.containerForCards.classList.contains("containerForCards_disabled")&&view.enableContainerForCards()))})}},runGame.init()};