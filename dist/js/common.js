var view={containerForCards:document.getElementsByClassName("containerForCards")[0],pointsPerGame:document.getElementsByClassName("pointsForGames__text")[0].getElementsByTagName("span")[0],losePointsPerGame:document.getElementsByClassName("pointsForGames__text")[1].getElementsByTagName("span")[0],winPointsPerGame:document.getElementsByClassName("pointsForGames__text")[2].getElementsByTagName("span")[0],elapsedTimePerGame:document.getElementsByClassName("pointsForGames__text")[3].getElementsByTagName("span")[0],pointsForGames6LosePointsPerGame:document.getElementsByClassName("pointsForGames_6")[0].getElementsByTagName("span")[0],pointsForGames6WinPointsPerGame:document.getElementsByClassName("pointsForGames_6")[0].getElementsByTagName("span")[1],pointsForGames6ElapsedTimePerGame:document.getElementsByClassName("pointsForGames_6")[0].getElementsByTagName("span")[2],pointsForGames8LosePointsPerGame:document.getElementsByClassName("pointsForGames_8")[0].getElementsByTagName("span")[0],pointsForGames8WinPointsPerGame:document.getElementsByClassName("pointsForGames_8")[0].getElementsByTagName("span")[1],pointsForGames8ElapsedTimePerGame:document.getElementsByClassName("pointsForGames_8")[0].getElementsByTagName("span")[2],pointsForGames10LosePointsPerGame:document.getElementsByClassName("pointsForGames_10")[0].getElementsByTagName("span")[0],pointsForGames10WinPointsPerGame:document.getElementsByClassName("pointsForGames_10")[0].getElementsByTagName("span")[1],pointsForGames10ElapsedTimePerGame:document.getElementsByClassName("pointsForGames_10")[0].getElementsByTagName("span")[2],pointsForGames12LosePointsPerGame:document.getElementsByClassName("pointsForGames_12")[0].getElementsByTagName("span")[0],pointsForGames12WinPointsPerGame:document.getElementsByClassName("pointsForGames_12")[0].getElementsByTagName("span")[1],pointsForGames12ElapsedTimePerGame:document.getElementsByClassName("pointsForGames_12")[0].getElementsByTagName("span")[2],cardAddClassSelected:function(e){e.classList.add("containerForCards__cards_selected")},cardRemoveClassSelected:function(e){e.classList.remove("containerForCards__cards_selected")},showWinMessage:function(){var e=document.createElement("div");e.classList.add("containerForCards__winMessage"),e.innerHTML='<p class="containerForCards__pWinMessage">Вы успешно открыли все карточки!</p>',this.containerForCards.appendChild(e)},deleteWinMessageIfPresent:function(){var e=this.containerForCards.getElementsByClassName("containerForCards__winMessage");e.length>0&&e[0].parentNode.removeChild(e[0])},addStartTimerClassInConteiner:function(){view.containerForCards.classList.add("startTimer")},removeStartTimerClassInConteiner:function(){view.containerForCards.classList.remove("startTimer")},addElemToCardContainer:function(e){this.containerForCards.appendChild(e)},clearCardGameContainer:function(){this.containerForCards.innerHTML=""},disableContainerForCards:function(){this.containerForCards.classList.add("containerForCards_disabled")},enableContainerForCards:function(){this.containerForCards.classList.remove("containerForCards_disabled")},disableCard:function(e){e.classList.add("containerForCards__cards_disabled")},updateVictoryPoints:function(e){this.pointsPerGame.innerHTML=e},updateLosePoints:function(e){this.losePointsPerGame.innerHTML=e},updateElapsedTimePerGame:function(e){this.elapsedTimePerGame.innerHTML=e},outputTheResultPerGame:function(e){this.winPointsPerGame.innerHTML=e},zeroesThePointsInTheTable:function(){this.pointsPerGame.innerHTML=0,this.losePointsPerGame.innerHTML=0,this.winPointsPerGame.innerHTML=0,this.elapsedTimePerGame.innerHTML=0},setsTheStyleOfThePauseButton:function(){controller.containerWithInformationsBtnPauseAndRemove.classList.add("containerWithInformations__btn_pause"),controller.containerWithInformationsBtnPauseAndRemove.classList.remove("containerWithInformations__btn_resume"),controller.containerWithInformationsBtnPauseAndRemove.innerHTML="пауза"},setsTheStyleOfTheResumeButton:function(){controller.containerWithInformationsBtnPauseAndRemove.classList.add("containerWithInformations__btn_resume"),controller.containerWithInformationsBtnPauseAndRemove.classList.remove("containerWithInformations__btn_pause"),controller.containerWithInformationsBtnPauseAndRemove.innerHTML="возобновить"},setGameStyle:function(e){var n=document.getElementsByTagName("body")[0];n.classList.contains("style2")&&n.classList.remove("style2"),n.classList.contains("style3")&&n.classList.remove("style3"),1!=e&&(2==e&&n.classList.add("style2"),3==e&&n.classList.add("style3"))},loadLocalStarageInfoToATable:function(){void 0!=localStorage.pointsForGames6WinPointsPerGame&&(this.pointsForGames6LosePointsPerGame.innerHTML=localStorage.pointsForGames6LosePointsPerGame,this.pointsForGames6WinPointsPerGame.innerHTML=localStorage.pointsForGames6WinPointsPerGame,this.pointsForGames6ElapsedTimePerGame.innerHTML=localStorage.pointsForGames6ElapsedTimePerGame),void 0!=localStorage.pointsForGames8WinPointsPerGame&&(this.pointsForGames8LosePointsPerGame.innerHTML=localStorage.pointsForGames8LosePointsPerGame,this.pointsForGames8WinPointsPerGame.innerHTML=localStorage.pointsForGames8WinPointsPerGame,this.pointsForGames8ElapsedTimePerGame.innerHTML=localStorage.pointsForGames8ElapsedTimePerGame),void 0!=localStorage.pointsForGames10WinPointsPerGame&&(this.pointsForGames10LosePointsPerGame.innerHTML=localStorage.pointsForGames10LosePointsPerGame,this.pointsForGames10WinPointsPerGame.innerHTML=localStorage.pointsForGames10WinPointsPerGame,this.pointsForGames10ElapsedTimePerGame.innerHTML=localStorage.pointsForGames10ElapsedTimePerGame),void 0!=localStorage.pointsForGames12WinPointsPerGame&&(this.pointsForGames12LosePointsPerGame.innerHTML=localStorage.pointsForGames12LosePointsPerGame,this.pointsForGames12WinPointsPerGame.innerHTML=localStorage.pointsForGames12WinPointsPerGame,this.pointsForGames12ElapsedTimePerGame.innerHTML=localStorage.pointsForGames12ElapsedTimePerGame)},transferTheResultToATable:function(){6==+controller.select.value&&this.pointsForGames6WinPointsPerGame.innerHTML<this.winPointsPerGame.innerHTML&&(this.pointsForGames6LosePointsPerGame.innerHTML=this.losePointsPerGame.innerHTML,this.pointsForGames6WinPointsPerGame.innerHTML=this.winPointsPerGame.innerHTML,this.pointsForGames6ElapsedTimePerGame.innerHTML=this.elapsedTimePerGame.innerHTML,localStorage.pointsForGames6LosePointsPerGame=this.losePointsPerGame.innerHTML,localStorage.pointsForGames6WinPointsPerGame=this.winPointsPerGame.innerHTML,localStorage.pointsForGames6ElapsedTimePerGame=this.elapsedTimePerGame.innerHTML),8==+controller.select.value&&this.pointsForGames8WinPointsPerGame.innerHTML<this.winPointsPerGame.innerHTML&&(this.pointsForGames8LosePointsPerGame.innerHTML=this.losePointsPerGame.innerHTML,this.pointsForGames8WinPointsPerGame.innerHTML=this.winPointsPerGame.innerHTML,this.pointsForGames8ElapsedTimePerGame.innerHTML=this.elapsedTimePerGame.innerHTML,localStorage.pointsForGames8LosePointsPerGame=this.losePointsPerGame.innerHTML,localStorage.pointsForGames8WinPointsPerGame=this.winPointsPerGame.innerHTML,localStorage.pointsForGames8ElapsedTimePerGame=this.elapsedTimePerGame.innerHTML),10==+controller.select.value&&this.pointsForGames10WinPointsPerGame.innerHTML<this.winPointsPerGame.innerHTML&&(this.pointsForGames10LosePointsPerGame.innerHTML=this.losePointsPerGame.innerHTML,this.pointsForGames10WinPointsPerGame.innerHTML=this.winPointsPerGame.innerHTML,this.pointsForGames10ElapsedTimePerGame.innerHTML=this.elapsedTimePerGame.innerHTML,localStorage.pointsForGames10LosePointsPerGame=this.losePointsPerGame.innerHTML,localStorage.pointsForGames10WinPointsPerGame=this.winPointsPerGame.innerHTML,localStorage.pointsForGames10ElapsedTimePerGame=this.elapsedTimePerGame.innerHTML),12==+controller.select.value&&this.pointsForGames12WinPointsPerGame.innerHTML<this.winPointsPerGame.innerHTML&&(this.pointsForGames12LosePointsPerGame.innerHTML=this.losePointsPerGame.innerHTML,this.pointsForGames12WinPointsPerGame.innerHTML=this.winPointsPerGame.innerHTML,this.pointsForGames12ElapsedTimePerGame.innerHTML=this.elapsedTimePerGame.innerHTML,localStorage.pointsForGames12LosePointsPerGame=this.losePointsPerGame.innerHTML,localStorage.pointsForGames12WinPointsPerGame=this.winPointsPerGame.innerHTML,localStorage.pointsForGames12ElapsedTimePerGame=this.elapsedTimePerGame.innerHTML)}},model={maxNumber:"",timerCount:1,timer:"",viewingPermission:!0,createCardElem:function(e,n,t,s){var a,i,o=document.createElement("div"),r=document.createElement("div");return o.className="containerForCards__cards containerForCards__cards_inGame containerForCards__cards_number"+e,o.setAttribute("data-elem-number",n),r.classList.add("containerForCards__frontOfCard"),a=0==t?"0%":9*t+"%",i=0==s?"0%":9*s+"%",r.style.cssText="background-position:"+a+" "+i+";",o.appendChild(r),o},createRandomDivNumberArray:function(e){this.maxNumber=e*e,halfMaxNumber=this.maxNumber/2;for(var n=[],t=[],s=1;s<=this.maxNumber;s++)n[s-1]=s;for(var a=1;a<=this.maxNumber;a++){var i=Math.floor(Math.random()*n.length),o=n[i];o>halfMaxNumber&&(o-=halfMaxNumber),t[a-1]=o,n.splice(i,1)}return t},countResultPerGame:function(){var e;return 6==+controller.select.value&&(e=10),8==+controller.select.value&&(e=20),10==+controller.select.value&&(e=40),12==+controller.select.value&&(e=80),view.pointsPerGame.innerHTML*e-view.losePointsPerGame.innerHTML-Math.floor(view.elapsedTimePerGame.innerHTML/10)},add1WinPoints:function(){return+view.pointsPerGame.innerHTML+1},add1LosePoints:function(){return+view.losePointsPerGame.innerHTML+1},getNumberDisabledCards:function(){return document.getElementsByClassName("containerForCards__cards_disabled").length},ifGameOverStopTimer:function(){+this.maxNumber==+this.getNumberDisabledCards&&clearInterval(this.timer)}},controller={select:document.getElementsByClassName("containerWithInformations__cardGameSize")[0],selectStyle:document.getElementsByClassName("containerWithInformations__cardGameStyle")[0],containerWithInformationsBtnPauseAndRemove:document.getElementsByClassName("containerWithInformations__btn")[0],containerWithInformationsBtnRestart:document.getElementsByClassName("containerWithInformations__btn")[1],appendDiv:function(e,n){var t,s;6==this.select.value&&(t=n%6,s=n<=6?0:n>6&&n<=12?1:2),8==this.select.value&&(t=n%8,n<=8?s=0:n>8&&n<=16?s=1:n>16&&n<=24?s=2:n>24&&n<=32&&(s=3)),10==this.select.value&&(t=n%10,n<=10?s=0:n>10&&n<=20?s=1:n>20&&n<=30?s=2:n>30&&n<=40?s=3:n>40&&n<=50&&(s=4)),12==this.select.value&&(t=n%12,n<=12?s=0:n>12&&n<=24?s=1:n>24&&n<=36?s=2:n>36&&n<=48?s=3:n>48&&n<=60?s=4:n>60&&n<=72?s=5:n>72&&n<=84&&(s=6));var a=model.createCardElem(e,n,t,s);view.addElemToCardContainer(a)},buildCardGame:function(e){view.deleteWinMessageIfPresent(),view.clearCardGameContainer();for(var n=model.createRandomDivNumberArray(e),t=0;t<n.length;t++)this.appendDiv(e,n[t]);this.showAllImg(model.maxNumber)},showAllImg:function(e){view.disableContainerForCards();for(var n=document.getElementsByClassName("containerForCards__cards"),t=1;t<=model.maxNumber;t++)view.cardAddClassSelected(n[t-1]);setTimeout(function(){for(var e=1;e<=model.maxNumber;e++)view.cardRemoveClassSelected(n[e-1]);view.enableContainerForCards()},3e3)},buildCardGameWhenClick:function(e){this.buildCardGame(e),view.containerForCards.classList.contains("startTimer")||view.addStartTimerClassInConteiner(),clearInterval(model.timer),model.timerCount=1,view.zeroesThePointsInTheTable(),this.containerWithInformationsBtnPauseAndRemove.classList.contains("containerWithInformations__btn_resume")&&view.setsTheStyleOfThePauseButton()},ifSelectedCards2RemoveClassSelected:function(e){model.viewingPermission=!1,setTimeout(function(){for(var n=1;n>=0;n--)view.cardRemoveClassSelected(e[n]);model.viewingPermission=!0,+model.maxNumber==+model.getNumberDisabledCards()&&(view.outputTheResultPerGame(model.countResultPerGame()),view.transferTheResultToATable(),view.showWinMessage())},700)},ifIdenticalSelectedCards:function(){var e=document.getElementsByClassName("containerForCards__cards_selected");if(2==e.length)if(e[0].getAttribute("data-elem-number")==e[1].getAttribute("data-elem-number")){for(var n=1;n>=0;n--)view.disableCard(e[n]);view.updateVictoryPoints(model.add1WinPoints()),this.ifSelectedCards2RemoveClassSelected(e)}else this.ifSelectedCards2RemoveClassSelected(e),view.updateLosePoints(model.add1LosePoints())},startTimer:function(){view.containerForCards.classList.contains("startTimer")&&(view.removeStartTimerClassInConteiner(),model.timer=setInterval(function(){view.updateElapsedTimePerGame(model.timerCount++)},1e3))},allowsYouToOpenTheFollowingCards:function(e){model.viewingPermission&&(e.classList.contains("containerForCards__cards")&&e.classList.contains("containerForCards__cards_inGame")&&view.cardAddClassSelected(e),controller.ifIdenticalSelectedCards())},clickPauseOrResume:function(){view.containerForCards.classList.contains("startTimer")||(controller.containerWithInformationsBtnPauseAndRemove.classList.contains("containerWithInformations__btn_pause")?(view.setsTheStyleOfTheResumeButton(),clearInterval(model.timer),view.disableContainerForCards()):controller.containerWithInformationsBtnPauseAndRemove.classList.contains("containerWithInformations__btn_resume")&&(view.setsTheStyleOfThePauseButton(),model.timer=setInterval(function(){view.updateElapsedTimePerGame(model.timerCount++)},1e3),view.containerForCards.classList.contains("containerForCards_disabled")&&view.enableContainerForCards()))}};window.onload=function(){runGame={init:function(){this.main(),this.event()},main:function(){view.setGameStyle(controller.selectStyle.value),controller.buildCardGame(controller.select.value),view.loadLocalStarageInfoToATable(),view.addStartTimerClassInConteiner()},event:function(){controller.select.addEventListener("change",function(){controller.buildCardGameWhenClick(+controller.select.value)}),controller.containerWithInformationsBtnRestart.addEventListener("click",function(){controller.buildCardGameWhenClick(+controller.select.value)}),controller.selectStyle.addEventListener("change",function(){view.setGameStyle(+controller.selectStyle.value)}),view.containerForCards.addEventListener("click",controller.startTimer),view.containerForCards.addEventListener("click",model.ifGameOverStopTimer),view.containerForCards.addEventListener("click",function(e){var n=e.target;controller.allowsYouToOpenTheFollowingCards(n)}),controller.containerWithInformationsBtnPauseAndRemove.addEventListener("click",controller.clickPauseOrResume)}},runGame.init()};